{
  "hash": "e66f77f61034d01aae7b2d5e273a62d3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"03_announcement_days\"\nauthor: \"Xolani Sibande (April 2025)\"\n---\n\n\n\n\n\nImporting packages:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nlibrary(here)\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nhere() starts at /Users/xolanisibande-dev/Papers/US_EM_MPS_spillover\n```\n\n\n:::\n\n```{.r .cell-code .hidden}\nsource(here(\"notebooks\", \"packages_script.R\"))\n```\n:::\n\n\n\n\n\nImporting functions:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nsource(here(\"notebooks\", \"functions\", \"fx_plot.R\"))\n```\n:::\n\n\n\n\n\nImporting data:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nyields_tbl <- read_rds(here(\"notebooks\",\"outputs\", \"artifacts_yields_data.rds\")) |> \n  pluck(1) \n\nsurprises_tbl <- read_rds(here(\"notebooks\",\"outputs\", \"artifacts_surprises_data.rds\")) |> \n  pluck(2)\n```\n:::\n\n\n\n\n\nCombined data:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nannouncement_days_tbl <-  \n  surprises_tbl |> \n  left_join( yields_tbl |> \n               pivot_wider(names_from = Series, values_from = Value),\n             by = c(\"Date\" = \"Date\")) |> \n  mutate(across(\n    c(\"SA\", \"Brazil\", \"China\"),\n    ~ .x - lag(.x, 1), \n    .names = \"{.col}_diff\")) |> \n  filter(Date >= \"2010-01-01\")\n```\n:::\n\n\n\n\n\n\nEDA:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nannouncement_days_tbl |> \n  skim()\n```\n\n::: {.cell-output-display}\n\nTable: Data summary\n\n|                         |                      |\n|:------------------------|:---------------------|\n|Name                     |announcement_days_tbl |\n|Number of rows           |118                   |\n|Number of columns        |10                    |\n|_______________________  |                      |\n|Column type frequency:   |                      |\n|Date                     |1                     |\n|numeric                  |9                     |\n|________________________ |                      |\n|Group variables          |None                  |\n\n\n**Variable type: Date**\n\n|skim_variable | n_missing| complete_rate|min        |max        |median     | n_unique|\n|:-------------|---------:|-------------:|:----------|:----------|:----------|--------:|\n|Date          |         0|             1|2010-01-27 |2023-12-13 |2017-05-24 |      118|\n\n\n**Variable type: numeric**\n\n|skim_variable | n_missing| complete_rate|  mean|   sd|    p0|   p25|   p50|   p75|  p100|hist  |\n|:-------------|---------:|-------------:|-----:|----:|-----:|-----:|-----:|-----:|-----:|:-----|\n|FFR           |         0|          1.00|  0.07| 0.49| -3.32|  0.03|  0.12|  0.20|  0.88|▁▁▁▂▇ |\n|FG            |         0|          1.00| -0.02| 0.96| -3.07| -0.34|  0.02|  0.39|  2.86|▁▂▇▂▁ |\n|LSAP          |         0|          1.00|  0.08| 0.58| -1.38| -0.17|  0.04|  0.25|  2.74|▁▇▂▁▁ |\n|SA            |        23|          0.81|  9.09| 1.29|  6.87|  8.32|  8.92|  9.45| 12.40|▃▇▅▂▂ |\n|China         |        10|          0.92|  3.35| 0.50|  2.48|  2.92|  3.33|  3.65|  4.65|▇▇▇▃▂ |\n|Brazil        |        23|          0.81| 10.95| 2.22|  6.49|  9.57| 11.32| 12.45| 16.73|▃▆▇▃▁ |\n|SA_diff       |        35|          0.70|  0.00| 0.40| -1.41| -0.22| -0.02|  0.23|  0.93|▁▁▇▇▂ |\n|Brazil_diff   |        33|          0.72| -0.07| 0.74| -2.09| -0.54| -0.04|  0.36|  2.21|▁▅▇▂▁ |\n|China_diff    |        20|          0.83|  0.00| 0.16| -0.45| -0.11| -0.01|  0.07|  0.50|▁▅▇▂▁ |\n\n\n:::\n:::\n\n\n\n\n\nGraphing:\n\n\n\n\n\n::: {#cell-fig-chart .cell layout-align=\"center\"}\n\n```{.r .cell-code .hidden}\n#| label: fig-chart\n#| fig-cap: \"chart\"\n#| fig-align: center\n#| fig-width: 6\n#| fig-height: 6\n\nannouncement_days_gg <- \n  announcement_days_tbl |> \n  pivot_longer(cols = -Date, \n               names_to = \"Series\",\n               values_to = \"Value\") |> \n  filter(Series %in% c(\"SA_diff\", \"Brazil_diff\", \"China_diff\")) |> \n  # make scatter plot\n  ggplot(aes(x = Date, y = Value, col = Series)) +\n  geom_point() +\n  facet_wrap(. ~ Series, \n              scale = \"free\", \n              labeller = label_parsed, \n             ncol = 1, \n             nrow = 3) +\n  theme_bw() +\n  theme(\n    legend.position = \"none\",\n    panel.grid.major = element_blank(),\n    panel.grid.minor = element_blank()\n  ) +\n  theme(\n    text = element_text(size = 8),\n    strip.background = element_rect(colour = \"white\", fill = \"white\"),\n    axis.text.x = element_text(angle = 90),\n    axis.title = element_text(size = 7),\n    plot.tag = element_text(size = 8)\n  ) +\n  labs(x = \"\", y = \"\") +\n  scale_color_manual(values = pnw_palette(\"Sunset2\", 3))\n\nannouncement_days_gg\n```\n\n::: {.cell-output .cell-output-stderr .hidden}\n\n```\nWarning: Removed 88 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![chart](03_announcement_days_files/figure-html/fig-chart-1.png){#fig-chart fig-align='center' width=576}\n:::\n:::\n\n\n\n\n\nExport:\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code .hidden}\nartifacts_announcement_days_data <- list (\n  announcement_days_tbl = announcement_days_tbl,\n  announcement_days_gg = announcement_days_gg\n)\n\nwrite_rds(artifacts_announcement_days_data, \n          file = here(\"notebooks\", \"outputs\", \"artifacts_announcement_days_data.rds\"))\n```\n:::\n",
    "supporting": [
      "03_announcement_days_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}